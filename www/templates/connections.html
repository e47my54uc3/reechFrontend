<ion-view title="Connections">
<main-header></main-header>

<ion-tabs class="has-footer tabs-dark">

  <ion-tab title="My Reech">
    <div class="list has-subheader  row250">
        <div class="item item-divider">
        Groups
        </div>
        <ul class="list">
          <ion-scroll>
          <li ng-repeat="group in groups" class="item">
            {{group.name}}
            <span class="item-note">
              <a href="#"><i class="icon ion-close-round"></i></a>
            </span>
            <span class="item-note">
              <div></div>
            </span>
            <span class="item-note padding-left">
              <button reech-modal modal-template="'/templates/group_members.html'" modal-before-open="beforeGroupModal(group.id)" class="button button-small button-light" ng-click="openModal()">
                {{group.members.length}} {{group.members.length > 1 ? 'members' : 'member'}}
              </button>
            </span>
          </li>
          </ion-scroll>
        </ul>
    </div>
    <div class="list has-subheader row250">
        <div class="item item-divider">
        Friends
        </div>
        <ul class="list">
          <ion-scroll>
          <li ng-repeat="friend in friends_list" class="item">
            {{friend.first_name}} {{friend.last_name}}

            <span class="item-note padding-left">
              <button modal-template="'/templates/user_groups.html'" modal-before-open="beforeMemberModal(friend.id)" modal-on-close="executeOnClose()" class="button button-small button-light" reech-modal ng-click="openModal()">
                {{friend.groups.length}} {{friend.groups.length > 1 ? 'groups' : 'group'}}
              </button>
            </span>

          </li>
        </ion-scroll>
        </ul>
    </div>
  </ion-tab>

  <ion-tab title="Contacts">
    <ion-content>
      <div class="list has-subheader">
        <button ng-disabled="audien_details.emails.length == 0 && audien_details.phone_numbers.length == 0" ng-click="sendRequest()" class="button button-block button-positive">
          Send request
        </button>
        <div ng-repeat-start="(initialLetter, lists) in contacts" class="item item-divider">
        {{initialLetter}}
        </div>
        <div ng-repeat="contact in lists">
          <ion-checkbox ng-if="contact.type == 'phone_number'" ng-click="updateNumberAudienSelection($event, contact.number)" ng-checked="audien_details.phone_numbers.indexOf(phone_number.value) != -1">{{contact.name}}  {{contact.number}}</ion-checkbox>
          <ion-checkbox ng-if="contact.type == 'email'" ng-click="updateEmailAudienSelection($event, contact.email)" ng-checked="audien_details.emails.indexOf(email.value) != -1">{{contact.name}}  {{contact.email}}</ion-checkbox>
        </div>
        <div ng-repeat-end></div>
      </div>
    </ion-content>

  </ion-tab>

  <ion-tab title="Find Friends">

  </ion-tab>

</ion-tabs>

</ion-view>
